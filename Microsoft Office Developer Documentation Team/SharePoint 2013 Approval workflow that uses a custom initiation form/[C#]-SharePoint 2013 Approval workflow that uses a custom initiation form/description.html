<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
    <head><link rel="stylesheet" type="text/css" href="description/Combined.css,0:HeaderFooterSprite,0:Header.NonMtps,1:LinkList;/Areas/Centers/Themes/StandardDevCenter/Content:0,/Areas/Epx/Themes/Base/Content:1&amp;amp;hashKey=C9973DA951AE6202C9B348379A1BE49D" xmlns="http://www.w3.org/1999/xhtml" />
<link type="text/css" rel="stylesheet" xmlns="http://www.w3.org/1999/xhtml" />
<link rel="stylesheet" type="text/css" href="description/9bf1b74c-1640-46af-84d3-e440c8f95162Combined.css,0:HeaderFooterSprite,0:Footer.NonMtps,1:LinkList;/Areas/Centers/Themes/StandardDevCenter/Content:0,/Areas/Epx/Themes/Base/Content:1&amp;amp;hashKey=F576C687BC536B84D6E5B3246EE39B49" xmlns="http://www.w3.org/1999/xhtml" />
<link type="text/css" rel="stylesheet" xmlns="http://www.w3.org/1999/xhtml" />

        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>SharePoint 2013: Approval workflow that uses a custom initiation form</title>
        <link href="description/Galleries.css" type="text/css" rel="Stylesheet" /><link href="description/Layout.css" type="text/css" rel="Stylesheet" /><link href="description/Brand.css" type="text/css" rel="Stylesheet" />
        <link href="description/iframedescription.css" rel="Stylesheet" type="text/css" />
        <script src="description/offline.js" type="text/javascript"></script>
        <style type="text/css">
            #projectInfo {
                overflow: auto;
            }
            #longDesc {
                clear:both;
                margin: 25px 0 10px 0;
            }

            #SampleIndexList{
                margin-left: 15px;
            }
        </style>
    </head>
<body>
    <div id="offlineDescription">
        <h1>SharePoint 2013: Approval workflow that uses a custom initiation form</h1>
        <br/>
        <div id="projectInfo">
            <div class="section">
                    <div class="itemBarLong tagsContainer">
                        <label for="Technologies">Technologies</label>
                        <div id="Technologies">
                            SharePoint Server 2013, SharePoint Foundation 2013, apps for SharePoint
                        </div>
                    </div>
                    <div class="itemBarLong tagsContainer">
                        <label for="Topics">Topics</label>
                        <div id="Topics">
                            Workflows
                        </div>
                    </div>
                <div class="itemBarLong">
                    <label for="Platforms">Platforms</label>
                    <div id="Platforms">
                        Cloud
                    </div>
                </div>
                <div class="itemBarLong">
                    <label for="Requirements">Requirements</label>
                    <div id="Requirements">
                        
                    </div>
                </div>
                <div class="itemBar">
                    <label for="LastUpdated">Primary language</label>
                    <div id="LastUpdated">en-US</div>
                </div>
                <div class="itemBar">
                    <label for="LastUpdated">Updated</label>
                    <div id="LastUpdated">4/23/2013</div>
                </div>
                <div class="itemBarLong">
                    <label for="License">License</label>
                    <div id="License">
                        <a href="license.rtf">Apache License, Version 2.0</a></div>
                </div>
                <div class="itemBar">
                    <div class="viewonlinecont">
                        <a data-link="online" href="http://code.msdn.microsoft.com/SharePoint-2013-Approval-f5ac5eb2">View this sample online</a>
                    </div>
                </div>
            </div>
        </div>
        
                   
<script type="text/javascript">
    function initializePage() {
        var otherTabClass = 'otherTab';
        var hiddenPreClass = 'hidden';

        var htmlDecode = function(encodedData) {
            var decodedData = "";
            if (encodedData) {
                var div = document.createElement('div');
                div.innerHTML = encodedData;
                decodedData = div.firstChild.nodeValue.replace( /\\r\\n/ig , '\r\n');
            }
            return decodedData;
        };
                
        Galleries.iterateElem(Galleries.findElem(null, 'div', 'scriptcode'), function (index, scriptBlock) {
            var titleElem = Galleries.findElem(scriptBlock, 'div', 'title')[0];
            var labelElems = Galleries.findElem(titleElem, 'span');
            if (labelElems.length == 0) {
                labelElems = titleElem;
            }
            var languageSpans = Galleries.findElem(scriptBlock, 'span', 'hidden');
            var pres = Galleries.findElem(scriptBlock, 'pre');
            if (languageSpans.length > 0 && pres.length > 1) {
                Galleries.iterateElem(labelElems, function(index, elem) {
                    var codePre = pres[index];
                    var labelSpan = elem;
                    var languageSpan = languageSpans[index];
                            
                    elem.code = codePre.innerHTML.replace( /(\r(\n)?)|((\r)?\n)/ig , '\\r\\n');
                            
                    codePre.className = codePre.className.replace(hiddenPreClass, '');
                            
                    languageSpan.parentNode.removeChild(languageSpan);
                });

                pres = Galleries.findElem(scriptBlock, 'pre');
                Galleries.iterateElem(labelElems, function(index, elem) {
                    var codePre = pres[index];
                    var labelSpan = elem;
                    if (index == 0) {
                        scriptBlock.activeTab = 0;
                    }
                    else {
                        labelSpan.className += otherTabClass;
                        codePre.className += hiddenPreClass;
                    }
                    Galleries.attachEventHandler(labelSpan, 'click', function(e) {
                        var activeTab = scriptBlock.activeTab;
                        labelElems[activeTab].className += otherTabClass;
                        pres[activeTab].className += hiddenPreClass;

                        codePre.className = codePre.className.replace(hiddenPreClass, '');
                        labelSpan.className = labelSpan.className.replace(otherTabClass, '');
                        scriptBlock.activeTab = index;
                    });
                });

                var preview = Galleries.findElem(scriptBlock, 'div', 'preview');
                if (preview.length == 0) {
                    preview.push(pres[pres.length - 1]);
                }
                Galleries.iterateElem(preview, function(index, elem) {
                    elem.parentNode.removeChild(elem);
                });

                if (window.clipboardData && clipboardData.setData) {
                    var copyLink = document.createElement('a');
                    copyLink.href = 'javascript:void(0);';
                    copyLink.className = 'copyCode';
                    copyLink.innerHTML = 'Copy code';
                    Galleries.attachEventHandler(copyLink, 'click', function (e) {
                        clipboardData.setData("Text", htmlDecode(labelElems[scriptBlock.activeTab].code));
                        return false;
                    });
                    scriptBlock.insertBefore(copyLink, scriptBlock.childNodes[0]);
                }
            }
        });
    }

    Galleries.onWindowLoad(function(){
        initializePage();
    });

</script>
<div id="longDesc">
    
<div id="header"><span class="label">Summary:</span> Demonstrates how to use a flowchart-style workflow to route a workflow to different people depending on the pathway the workflow takes. It also shows how to copy items from one list to another and how
 to use custom initiation forms.</div>
<div id="mainSection">
<div id="mainBody">
<div class="introduction">
<div class="section" id="sectionSection0">
<p><span class="label">Provided by: </span><a href="http://social.msdn.microsoft.com/profile/andrew%20connell%20%5bmvp%5d/" >Andrew Connell</a>,
<a href="http://www.andrewconnell.com" >www.AndrewConnell.com</a></p>
<p>This basic workflow scenario supports a document review and approval/reject process. The workflow starts when a document is added to a specified &quot;Drafts&quot; SharePoint library. The workflow assigns a task to a reviewer, who evaluates the draft, makes comments
 as necessary, and then concludes the task by either routing the document back to the writer for revisions, or forwarding it to the editor for editing and release. Additional tasks are assigned, depending on the branch. If the document was returned to the writer
 for revisions, the writer completes the revision task, and the workflow loops back to the reviewer. When the document is forwarded to the editor, the task completion adds the finished doc to another document library named &quot;manuscripts.&quot;</p>
</div>
<h1 class="heading">Prerequisites</h1>
<div class="section" id="sectionSection1">
<p>This sample requires the following:</p>
<ul>
<li>
<p>SharePoint 2013 installation that is connected to a configured Workflow Manager 1.0 farm.</p>
</li><li>
<p>Workflow Manager 1.0 that has the March 2013 cumulative update applied.</p>
</li><li>
<p>Service Bus 1.0, with the Mach 2013 cumulative update applied.</p>
</li><li>
<p>Visual Studio 2012 and Office Developer Tools for Visual Studio 2012</p>
</li></ul>
</div>
<h1 class="heading">Key components of the sample</h1>
<div class="section" id="sectionSection2">
<ul>
<li>
<p>ApprovalWorkflowApp.sln contains the entire SharePoint-hosted app and workflow.</p>
</li><li>
<p>The Libraries folder in the Visual Studio solution contains libraries used by the workflow.</p>
</li><li>
<p>The Workflow Dependencies folder in the Visual Studio solution contains a custom task outcome columns, content types, and the workflow lists used by the workflow.</p>
</li><li>
<p>The Manuscript Approval workflow contains the workflow itself.</p>
</li><li>
<p>The Pages folder contains the custom initiation form.</p>
</li></ul>
</div>
<h1 class="heading">Configure and build the sample</h1>
<div class="section" id="sectionSection3">
<p>Follow these steps to configure the sample.</p>
<ol>
<li>
<p>Make sure that you have a site collection created using the Developer Site template.</p>
</li><li>
<p>Open the solution Visual Studio 2012.</p>
</li><li>
<p>Change the <span><span class="keyword">Site URL</span></span> property on the project to be the URL of the developer site.</p>
</li><li>
<p>Make sure that you have three people in Active Directory (for instance, Cliff Schoonover, Ross Mulkey, and Jess Liddell).</p>
</li><li>
<p>Run a full synchronization of the User Profile Application.</p>
</li><li>
<p>Grant all three fictitious users access to the developer site.</p>
</li><li>
<p>Build <span class="ui">ApprovalWorkflowApp.sln</span>.</p>
</li></ol>
</div>
<h1 class="heading">Run and test the sample</h1>
<div class="section" id="sectionSection4">
<p>&nbsp;</p>
<div class="subSection">
<ol>
<li>
<p>Open <span class="ui">ApprovalWorkflowApp.sln</span> and press <span class="ui">
F5</span> (ensuring it has been configured to point to the developer site).</p>
</li><li>
<p>When the app deploys, it opens the home page that contains links to the <span class="ui">
Drafts</span> library.</p>
</li><li>
<p>Click the <span class="ui">Drafts</span> link and upload a document.</p>
</li><li>
<p>Navigate to the document's detail page and start the Manuscript Approval workflow.</p>
</li><li>
<p>The initiation form loads. When it loads, specify two different users for the reviewer and editor, and click the
<span class="ui">Start</span> button.</p>
</li><li>
<p>Navigate to the workflow status page for this item. You should see a new task created for the reviewer.</p>
</li><li>
<p>Open the task and click <span class="ui">Proceed to Editor</span>.</p>
</li><li>
<p>Navigate to the workflow status page for this item. You should see a new task created for the editor.</p>
</li><li>
<p>Open the task and click <span class="ui">Approve</span>.</p>
<p>After you approve the suggestion, the document is copied to the Manuscripts folder.</p>
</li><li>
<p>Rerun the workflow, but this time, when the reviewer completes the task, click
<span class="ui">Send Back to Author</span>. This routes the document back to the author for further work.</p>
</li></ol>
</div>
</div>
<h1 class="heading">Troubleshooting</h1>
<div class="section" id="sectionSection5">
<p>If the workflow fails, it is likely due to one of two things: either the users have not been imported into the User Profile Application, or the environment has not been configured to send email messages. The latter condition reports errors, but it does not
 keep the workflow from running.</p>
</div>
<h1 class="heading">Change log</h1>
<div class="section" id="sectionSection6">
<div class="caption"></div>
<div class="tableSection">
<table cellspacing="2" cellpadding="5" width="50%" frame="lhs">
<tbody>
<tr>
<td>
<p>First release</p>
</td>
<td>
<p>January 2013</p>
</td>
</tr>
<tr>
<td>
<p>Revised</p>
</td>
<td>
<p>April 2013</p>
</td>
</tr>
</tbody>
</table>
</div>
</div>
<h1 class="heading">Related content</h1>
<div class="section" id="sectionSection7">
<ul>
<li>
<p><a href="http://msdn.microsoft.com/en-us/library/fp179923.aspx" >How to: Set up an on-premises development environment for apps for SharePoint</a></p>
</li><li>
<p><a href="http://msdn.microsoft.com/en-us/library/jj163276.aspx" >Start: Set up and configure SharePoint 2013 Workflow Manager</a></p>
</li><li>
<p><a href="http://msdn.microsoft.com/en-us/library/fp179930.aspx" >Apps for SharePoint overview</a></p>
</li><li>
<p><a href="http://msdn.microsoft.com/en-us/library/fp142379.aspx" >How to: Create a basic SharePoint-hosted app</a></p>
</li><li>
<p><a href="http://msdn.microsoft.com/en-us/library/jj163986.aspx" >Workflows in SharePoint 2013</a></p>
</li><li>
<p><a href="http://msdn.microsoft.com/en-us/library/jj163276.aspx" >Start: Set up and configure SharePoint 2013 Workflow Manager</a></p>
</li><li>
<p><a href="http://msdn.microsoft.com/en-us/library/windowsazure/jj193528(v=azure.10).aspx" >Workflow Manager 1.0</a></p>
</li></ul>
</div>
</div>
</div>
</div>

</div>


    </div>
</body>
</html>
